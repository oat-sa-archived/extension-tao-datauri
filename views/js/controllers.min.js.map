{"version":3,"file":"routes.js","sources":["routes.js","base64Converter.js"],"names":["define","Base64Converter","actions","index","$","__","ui","uploader","feedback","base64Container","$textarea","on","width","outerWidth","height","outerHeight","e","file","interactionHook","error","success","timeout","html","base64","select","message","uploadUrl","data","uploadBtnText"],"mappings":"AAuBAA,OAAA,kCAAA,WACA,OACAC,iBACAC,SACAC,MAAA,kCCJAH,OAAA,yCACA,SACA,OACA,KACA,cACA,eAEA,SAAAI,EAAAC,GAAAC,GAAAC,SAAAC,UAGA,GAAAC,iBAAAL,EAAA,qBACAM,UAAAN,EAAA,eAGAK,iBAAAE,GAAA,kBAAA,WACAD,UAAAE,MAAA,EAAAH,gBAAAI,cAAAC,OAAAL,gBAAAM,iBAGAN,gBAAAE,GAAA,kBAAA,SAAAK,EAAAC,KAAAC,iBACA,MAAAA,iBAAAC,UACAX,YAAAW,MAAAD,gBAAAC,QAIAX,WAAAY,QAAAF,gBAAAE,SACAC,SACAD,QAAA,WAEAV,WAAAY,KAAAJ,gBAAAK,QAAAC;GAGAf,gBAAAE,GAAA,gBAAA,SAAAK,EAAAC,KAAAC,iBACAV,WAAAW,MAAAD,gBAAAO,WAGAhB,gBAAAF,UACAmB,UAAAjB,gBAAAkB,KAAA,OACAC,cAAAvB,GAAA","sourcesContent":["/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('taoDataUri/controller/routes',[],function(){\n    return {\n        'Base64Converter' : {\n            'actions' : {\n                'index' : 'controller/base64Converter'\n            }\n        }\n    };\n});\n\n","/*\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2015 (original work) Open Assessment Technologies SA ;\n *\n */\n\n/**\n *\n * @author dieter <dieter@taotesting.com>\n */\ndefine('taoDataUri/controller/base64Converter',[\n    'jquery',\n    'i18n',\n    'ui',\n    'ui/uploader',\n    'ui/feedback'\n],\n    function ($, __, ui, uploader, feedback) {\n\n        // convert a resource to base 64\n        var base64Container = $('#base64-container'),\n            $textarea = $('#base64-code');\n\n\n        base64Container.on('create.uploader', function (e, file, interactionHook) {\n            $textarea.width(base64Container.outerWidth() * 2).height(base64Container.outerHeight());\n        });\n\n        base64Container.on('upload.uploader', function (e, file, interactionHook) {\n            if(interactionHook.error) {\n                feedback().error(interactionHook.error);\n                return;\n            }\n\n            feedback().success(interactionHook.success, {\n                timeout: {\n                    success: 4000\n                }});\n            $textarea.html(interactionHook.base64).select();\n        });\n\n        base64Container.on('fail.uploader', function (e, file, interactionHook) {\n            feedback().error(interactionHook.message);\n        });\n\n        base64Container.uploader({\n            uploadUrl: base64Container.data('url'),\n            uploadBtnText: __('Convert to Base64 Code')\n        });\n    });\n\n"]}